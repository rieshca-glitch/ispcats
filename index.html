<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–°–ü-–∫–æ—Ç—ã - –ú–µ–Ω—é –∏–≥—Ä—ã</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
        }
        
        body {
            background-color: #2c2c2c;
            color: #f0f0f0;
            min-height: 100vh;
            padding: 20px;
            background-image: url('https://i.pinimg.com/736x/5a/f5/4a/5af54ad92244755cb54faeedf5d956fd.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        .nickname-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .nickname-form {
            background-color: #444;
            padding: 40px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .nickname-form h2 {
            color: #bbb;
            margin-bottom: 20px;
            font-size: 2rem;
        }
        
        .nickname-input {
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            background-color: #555;
            border: 2px solid #666;
            border-radius: 10px;
            color: #f0f0f0;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .nickname-submit {
            background-color: #666;
            color: #f0f0f0;
            border: none;
            padding: 15px 40px;
            font-size: 1.3rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .nickname-submit:hover {
            background-color: #777;
        }
        
        .game-container {
            width: 100%;
            max-width: 1200px;
            background-color: rgba(40, 40, 40, 0.85);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 2px solid #555;
            display: none;
        }
        
        .header {
            background-color: #333;
            padding: 25px;
            text-align: center;
            border-bottom: 3px solid #666;
            position: relative;
        }
        
        .player-info {
            position: absolute;
            top: 25px;
            right: 25px;
            background-color: #555;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 1.1rem;
        }
        
        .player-info span {
            color: #ffcc00;
            font-weight: bold;
        }
        
        .game-title {
            font-size: 3.5rem;
            color: #bbb;
            text-shadow: 3px 3px 0 #000;
            letter-spacing: 2px;
        }
        
        .game-title span {
            color: #888;
        }
        
        .content-wrapper {
            display: flex;
            min-height: 700px;
        }
        
        .menu-sidebar {
            width: 250px;
            background-color: rgba(50, 50, 50, 0.9);
            padding: 20px 0;
            border-right: 2px solid #555;
        }
        
        .menu-button {
            display: block;
            width: 90%;
            margin: 10px auto;
            padding: 18px 15px;
            background-color: #666;
            color: #f0f0f0;
            border: none;
            border-radius: 12px;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            position: relative;
            overflow: hidden;
        }
        
        .menu-button:hover {
            background-color: #777;
            transform: translateX(5px);
        }
        
        .menu-button.active {
            background-color: #888;
            box-shadow: inset 0 0 0 3px #aaa;
        }
        
        .menu-button i {
            margin-right: 12px;
            width: 25px;
            text-align: center;
        }
        
        .content-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            max-height: 700px;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        h2 {
            color: #bbb;
            font-size: 2.2rem;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 2px solid #666;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .stat-card {
            background-color: #555;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border-left: 5px solid #888;
        }
        
        .stat-label {
            font-size: 1.1rem;
            color: #ccc;
            margin-bottom: 8px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #f0f0f0;
        }
        
        .ranking-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .ranking-item {
            background-color: #555;
            border-radius: 12px;
            padding: 18px 25px;
            display: flex;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }
        
        .ranking-item:hover {
            transform: translateY(-5px);
        }
        
        .ranking-item.current-player {
            background-color: #666;
            box-shadow: 0 0 0 3px #888;
        }
        
        .rank {
            font-size: 1.8rem;
            font-weight: bold;
            width: 60px;
            color: #ddd;
        }
        
        .player-name {
            font-size: 1.5rem;
            flex-grow: 1;
        }
        
        .player-position {
            font-size: 1.1rem;
            color: #bbb;
            background-color: #444;
            padding: 5px 15px;
            border-radius: 20px;
        }
        
        .skins-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            max-height: 600px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .skin-card {
            background-color: #555;
            border-radius: 12px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            position: relative;
        }
        
        .skin-card:hover {
            transform: scale(1.05);
            background-color: #5a5a5a;
        }
        
        .skin-card.owned {
            background-color: #4a5a4a;
            border: 2px solid #6ca86c;
        }
        
        .skin-card.locked {
            opacity: 0.7;
            filter: grayscale(30%);
        }
        
        .skin-card.selected {
            border: 3px solid #ffcc00;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.5);
        }
        
        .skin-image {
            width: 120px;
            height: 120px;
            background-color: #777;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            border: 3px solid #888;
        }
        
        .skin-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .skin-name {
            font-size: 1rem;
            text-align: center;
            margin-bottom: 10px;
            color: #f0f0f0;
            height: 40px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
        
        .skin-price {
            font-size: 1.2rem;
            font-weight: bold;
            color: #ffcc00;
            background-color: #444;
            padding: 5px 12px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .skin-price.free {
            color: #4CAF50;
        }
        
        .coin-icon {
            color: gold;
        }
        
        .skin-status {
            margin-top: 5px;
            font-size: 0.9rem;
            padding: 3px 8px;
            border-radius: 10px;
        }
        
        .skin-status.owned {
            color: #4CAF50;
            background-color: rgba(76, 175, 80, 0.2);
        }
        
        .skin-status.locked {
            color: #ff9800;
            background-color: rgba(255, 152, 0, 0.2);
        }
        
        .main-screen {
            text-align: center;
            padding-top: 50px;
        }
        
        .game-logo {
            font-size: 5rem;
            color: #bbb;
            margin-bottom: 20px;
            text-shadow: 3px 3px 0 #000;
        }
        
        .game-description {
            font-size: 1.2rem;
            color: #bbb;
            max-width: 700px;
            margin: 0 auto 30px;
            padding: 20px;
            background-color: rgba(85, 85, 85, 0.5);
            border-radius: 10px;
            line-height: 1.5;
        }
        
        .play-button {
            background-color: #666;
            color: #f0f0f0;
            border: none;
            padding: 25px 60px;
            font-size: 2.2rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
            box-shadow: 0 8px 0 #555;
        }
        
        .play-button:hover {
            background-color: #777;
            transform: translateY(-5px);
            box-shadow: 0 12px 0 #555;
        }
        
        .play-button:active {
            transform: translateY(0);
            box-shadow: 0 5px 0 #555;
        }
        
        .coins-count {
            position: absolute;
            top: 25px;
            left: 25px;
            background-color: #555;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .coins-count span {
            color: gold;
            font-weight: bold;
        }
        
        .coin-icon-large {
            color: gold;
            font-size: 1.3rem;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #4CAF50;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 1001;
            transform: translateX(150%);
            transition: transform 0.5s ease;
            max-width: 300px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.error {
            background-color: #f44336;
        }
        
        .notification.info {
            background-color: #2196F3;
        }
        
        .game-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #2c2c2c;
            z-index: 2000;
            overflow: hidden;
        }
        
        .game-header {
            position: absolute;
            top: 10px;
            left: 0;
            width: 100%;
            padding: 5px 10px;
            display: flex;
            justify-content: space-between;
            z-index: 10;
        }
        
        .score-display {
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
        }
        
        .game-canvas-container {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        #gameCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .pause-btn {
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
        }
        
        .game-over-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 20;
        }
        
        .game-over-content {
            background-color: #444;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            width: 90%;
            max-width: 500px;
        }
        
        .game-over-title {
            color: #ff5555;
            font-size: 3rem;
            margin-bottom: 20px;
        }
        
        .game-over-score {
            font-size: 2.5rem;
            color: #ffcc00;
            margin-bottom: 10px;
        }
        
        .game-over-coins {
            font-size: 1.8rem;
            color: gold;
            margin-bottom: 20px;
        }
        
        .game-over-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        
        .restart-btn, .menu-btn {
            padding: 15px 30px;
            font-size: 1.3rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .restart-btn {
            background-color: #4CAF50;
            color: white;
        }
        
        .menu-btn {
            background-color: #666;
            color: white;
        }
        
        .restart-btn:hover, .menu-btn:hover {
            transform: scale(1.05);
        }
        
        .current-skin-indicator {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 10px;
            font-size: 0.9rem;
            max-width: 150px;
            text-align: center;
            z-index: 10;
        }
        
        .skin-in-game {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            overflow: hidden;
            margin: 0 auto 5px;
            border: 2px solid #ffcc00;
        }
        
        .skin-in-game img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .exit-game-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(255, 0, 0, 0.7);
            color: white;
            border: none;
            padding: 8px 10px;
            border-radius: 50%;
            font-size: 1rem;
            cursor: pointer;
            z-index: 10;
        }
        
        .coin-display {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .coins-earned {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: gold;
            padding: 5px 10px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: bold;
            display: none;
            align-items: center;
            gap: 5px;
            animation: coinPopup 1s ease;
        }
        
        @keyframes coinPopup {
            0% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
            50% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        }
        
        .speed-display {
            position: absolute;
            top: 60px;
            left: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram */
        .telegram-auth-btn {
            background-color: #0088cc;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 10px auto;
            transition: all 0.3s ease;
        }
        
        .telegram-auth-btn:hover {
            background-color: #0077b5;
            transform: translateY(-2px);
        }
        
        @media (max-width: 900px) {
            .content-wrapper {
                flex-direction: column;
            }
            
            .menu-sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 2px solid #555;
            }
            
            .menu-button {
                width: 95%;
                margin: 5px auto;
            }
            
            .player-info {
                position: relative;
                top: 0;
                right: 0;
                margin-top: 15px;
                display: inline-block;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .skins-container {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
        
        @media (max-width: 600px) {
            .game-title {
                font-size: 2.5rem;
            }
            
            .content-area {
                padding: 15px;
            }
            
            .skins-container {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            }
            
            .skin-image {
                width: 100px;
                height: 100px;
            }
            
            .nickname-form {
                padding: 20px;
            }
        }
        
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: #444;
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #666;
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #777;
        }
    </style>
</head>
<body>
    <div class="nickname-modal" id="nicknameModal">
        <div class="nickname-form">
            <h2>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∏–≥—Ä–æ–≤–æ–π –Ω–∏–∫</h2>
            <input type="text" id="nicknameInput" class="nickname-input" placeholder="–í–∞—à –Ω–∏–∫–Ω–µ–π–º" maxlength="20">
            <button class="nickname-submit" id="nicknameSubmit">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
            
            <!-- –ö–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram (–µ—Å–ª–∏ –Ω–µ –≤ WebApp) -->
            <div id="telegramAuthSection" style="margin-top: 20px; display: none;">
                <div style="color: #bbb; margin-bottom: 10px;">–ò–ª–∏ –≤–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram:</div>
                <button class="telegram-auth-btn" id="telegramAuthBtn">
                    <i class="fab fa-telegram"></i> –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram
                </button>
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification"></div>
    
    <div class="game-container" id="gameContainer">
        <div class="header">
            <h1 class="game-title">–ò–°–ü<span>-–∫–æ—Ç—ã</span></h1>
            <div class="coins-count" id="coinsCount">
                <i class="fas fa-coins coin-icon-large"></i>
                <span id="coinsAmount">0</span> –º–æ–Ω–µ—Ç–æ–∫
            </div>
            <div class="player-info">
                –ò–≥—Ä–æ–∫: <span id="currentPlayerName">–ì–æ—Å—Ç—å</span>
                <div id="telegramBadge" style="display: none; font-size: 0.8rem; color: #0088cc; margin-top: 5px;">
                    <i class="fab fa-telegram"></i> Telegram
                </div>
            </div>
        </div>
        
        <div class="content-wrapper">
            <div class="menu-sidebar">
                <button class="menu-button active" data-tab="main">
                    <i class="fas fa-home"></i>–ì–ª–∞–≤–Ω–∞—è
                </button>
                <button class="menu-button" data-tab="stats">
                    <i class="fas fa-chart-bar"></i>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                </button>
                <button class="menu-button" data-tab="rating">
                    <i class="fas fa-trophy"></i>–†–µ–π—Ç–∏–Ω–≥
                </button>
                <button class="menu-button" data-tab="skins">
                    <i class="fas fa-user-circle"></i>–°–∫–∏–Ω—ã
                </button>
            </div>
            
            <div class="content-area">
                <div id="main" class="tab-content active">
                    <div class="main-screen">
                        <div class="game-logo">
                            <i class="fas fa-cat"></i>
                        </div>
                        <div class="game-description">
                            –î–ª—è —É–¥–æ–±–Ω–æ–π –∏–≥—Ä—ã –ø–µ—Ä–µ–≤–µ—Ä–Ω–∏—Ç–µ —ç–∫—Ä–∞–Ω!!! –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –∫–æ—Ç–æ–º –Ω–∞–∂–∞—Ç–∏–µ–º –Ω–∞ —ç–∫—Ä–∞–Ω, –ø—Ä—ã–≥–∞–π—Ç–µ, —Å–æ–±–∏—Ä–∞–π—Ç–µ –æ—á–∫–∏. (–ó–∞ –∫–∞–∂–¥—ã–µ 100 –æ—á–∫–æ–≤ –ø–æ–ª—É—á–∞–π—Ç–µ 1 –º–æ–Ω–µ—Ç–∫—É)
                        </div>
                        <button class="play-button" id="startGameBtn">
                            –ù–ê–ß–ê–¢–¨ –ò–ì–†–£
                        </button>
                    </div>
                </div>
                
                <div id="stats" class="tab-content">
                    <h2><i class="fas fa-chart-bar"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">–í—Å–µ–≥–æ —Å—ã–≥—Ä–∞–Ω–æ –∏–≥—Ä</div>
                            <div class="stat-value" id="totalGames">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</div>
                            <div class="stat-value" id="bestScore">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">–í—Å–µ–≥–æ –Ω–∞–±—Ä–∞–Ω–æ –æ—á–∫–æ–≤</div>
                            <div class="stat-value" id="totalPoints">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">–í—Å–µ–≥–æ –ø—Ä—ã–∂–∫–æ–≤</div>
                            <div class="stat-value" id="totalJumps">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</div>
                            <div class="stat-value" id="averageScore">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">–û—Ç–∫—Ä—ã—Ç–æ —Å–∫–∏–Ω–æ–≤</div>
                            <div class="stat-value" id="openedSkins">1/32</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">–ù–∞–∫–æ–ø–ª–µ–Ω–æ –º–æ–Ω–µ—Ç–æ–∫</div>
                            <div class="stat-value" id="totalCoins">0</div>
                        </div>
                    </div>
                </div>
                
                <div id="rating" class="tab-content">
                    <h2><i class="fas fa-trophy"></i> –†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤</h2>
                    <div class="ranking-list" id="rankingList">
                    </div>
                </div>
                
                <div id="skins" class="tab-content">
                    <h2><i class="fas fa-user-circle"></i> –ö–æ–ª–ª–µ–∫—Ü–∏—è —Å–∫–∏–Ω–æ–≤</h2>
                    <p style="margin-bottom: 20px; font-size: 1.2rem; color: #bbb; text-align: center;">
                        –£ –≤–∞—Å –µ—Å—Ç—å: <span id="coinsForSkins" style="color: gold; font-weight: bold;">0</span> –º–æ–Ω–µ—Ç–æ–∫
                    </p>
                    <div class="skins-container" id="skinsContainer">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="game-screen" id="gameScreen">
        <button class="exit-game-btn" id="exitGameBtn">
            <i class="fas fa-times"></i>
        </button>
        <div class="game-header">
            <div class="score-display">
                –û—á–∫–∏: <span id="currentScore">0</span>
            </div>
            <div class="coin-display" id="coinDisplay">
                <i class="fas fa-coins coin-icon"></i>
                <span id="currentCoins">0</span>
            </div>
            <button class="pause-btn" id="pauseBtn">
                <i class="fas fa-pause"></i>
            </button>
        </div>
        
        <div class="speed-display" id="speedDisplay">
            –°–∫–æ—Ä–æ—Å—Ç—å: <span id="currentSpeed">5</span>
        </div>
        
        <div class="coins-earned" id="coinsEarned">
            <i class="fas fa-coins"></i>
            +1 –º–æ–Ω–µ—Ç–∫–∞!
        </div>
        
        <div class="current-skin-indicator" id="currentSkinIndicator">
            <div class="skin-in-game">
                <img id="currentSkinImage" src="" alt="–¢–µ–∫—É—â–∏–π —Å–∫–∏–Ω">
            </div>
            <div id="currentSkinName">–¢–µ–∫—É—â–∏–π —Å–∫–∏–Ω</div>
        </div>
        
        <div class="game-canvas-container">
            <canvas id="gameCanvas"></canvas>
        </div>
        
        <div class="game-over-screen" id="gameOverScreen">
            <div class="game-over-content">
                <h2 class="game-over-title">–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê!</h2>
                <div class="game-over-score" id="finalScore">–û—á–∫–∏: 0</div>
                <div class="game-over-coins" id="finalCoins">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –º–æ–Ω–µ—Ç–æ–∫: 0</div>
                <div class="game-over-buttons">
                    <button class="restart-btn" id="restartBtn">
                        <i class="fas fa-redo"></i> –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞
                    </button>
                    <button class="menu-btn" id="menuBtn">
                        <i class="fas fa-home"></i> –í –º–µ–Ω—é
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let playerName = "–ì–æ—Å—Ç—å";
        let playerStats = {
            totalGames: 0,
            bestScore: 0,
            totalPoints: 0,
            totalJumps: 0,
            openedSkins: 1,
            unlockedSkins: [0],
            selectedSkin: 0,
            coins: 0,
            coinsEarned: 0,
            lastCoinScore: 0
        };
        
        let game = {
            canvas: null,
            ctx: null,
            width: 0,
            height: 0,
            running: false,
            score: 0,
            gameSpeed: 5,
            baseSpeed: 5,
            gravity: 0.5,
            jumpForce: -15,
            isPaused: false,
            player: {
                x: 100,
                y: 0,
                width: 80,
                height: 80,
                velocityY: 0,
                isJumping: false,
                skinIndex: 0
            },
            ground: {
                x: 0,
                y: 0,
                width: 0,
                height: 100
            },
            obstacles: [],
            clouds: [],
            lastObstacleTime: 0,
            obstacleInterval: 2000,
            lastCloudTime: 0,
            cloudInterval: 3000,
            jumpCount: 0,
            lastScoreUpdate: 0,
            scoreUpdateInterval: 50,
            distanceTraveled: 0
        };
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è Telegram WebApp
        let isTelegramWebApp = false;
        let telegramUser = null;
        let webAppInitialized = false;
        
        const skinNames = [
            "–ú–µ–ª–∏—Å–∞ –ê–≥–∑–∞–º–æ–≤–∞", "–ì—É–ª—å—Å–∏—è –ê–º–∏–Ω–µ–≤–∞", "–î–∞–Ω–∏–∏–ª –ë–∞–¥—Ä–∞–Ω–æ–≤", "–î–∞–Ω–∏–ª –ë–∞–π—Å–ª–∞–º–æ–≤", 
            "–ù–∞—Å—Ç—è –ë–∞—Ç—ã—Ä—à–∏–Ω–∞", "–ò–ª—Ö–∞–Ω –ë–∏–∫–±—É–ª–∞—Ç–æ–≤", "–Æ–ª–¥–∞—à –ì–∞–±–±–∞—Å–æ–≤", "–ë—É–ª–∞—Ç –ì–∞–±—Å–∞–±–∏—Ä–æ–≤",
            "–î–∞–Ω–∏–ª –ì–∞–∑–∏–∑–æ–≤", "–ê–∑–∞–ª–∏—è –ó–∞–π–Ω—É–ª–∏–Ω–∞", "–ú–∏–ª–∞–Ω–∞ –ò–º–∞—à–µ–≤–∞", "–†–µ–≥–∏–Ω–∞ –ö–∞–∑–±–∞–∫–æ–≤–∞", 
            "–ê—Ä—Ç–µ–º –ú–∞–∑–∏–Ω", "–°–∞–ª–∏—è –ú—É—Ö–∞–º–µ—Ç–æ–≤–∞", "–°–æ—Ñ–∏—è –ú—É—Ö–∞–º–µ—Ç–¥–∏–Ω–æ–≤–∞", "–ê—Ä—Å–ª–∞–Ω –ú–∞—Ö–º—É—Ç–æ–≤",
            "–õ–∏–ª–∏—è –ú–∏–≥—Ä–∞–Ω–æ–≤–∞", "–ó–∞–ª–∏–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞", "–†–∞–¥–º–∏—Ä –°–∞–∏—Ç–±–∞—Ç–∞–ª–æ–≤", "–ê—Ä—Å–ª–∞–Ω –°–∞–π—Ñ—É—Ç–¥–∏–Ω–æ–≤", 
            "–°–æ—Ñ—å—è –°–∞—Ö–∞—Ä—á—É–∫", "–î–∞—à–∞ –°–∏—É—Ö–æ–≤–∞", "–ê–Ω—è –°–æ–±–æ–ª–µ–≤–∞", "–ù–∏–∫–∏—Ç–∞ –°—Ç–µ–ø–∞–Ω–æ–≤", 
            "–¢–∏–º—É—Ä –¢–∞—Ä—Ç—ã–∫–æ–≤", "–î–∏–∞–Ω–∞ –•–∞–ª–∏–∫–æ–≤–∞", "–ò–ª–Ω—É—Ä –•–∞—Å–∞–Ω–æ–≤", "–ò–ª–Ω–∞–∑ –•–∞—Å–∞–Ω–æ–≤", 
            "–¢–∞–º–∏–ª–∞ –•–∏—Å–∞–º–æ–≤–∞", "–†–∞–º–∏–Ω–∞ –Æ–º–∞–∫–∞–µ–≤–∞", "–ê–¥—ç–ª—è –Ø–º–∞–µ–≤–∞", "–ê–π–¥–∞—Ä –†–∏—à–∞—Ç–æ–≤–∏—á"
        ];
        
        const skinImages = [
            'https://i.postimg.cc/7PC50wPD/IMG-0709.png',
            'https://i.postimg.cc/HsgTngrD/IMG-0745.png',
            'https://i.postimg.cc/3NHQkXJq/IMG-0688.png',
            'https://i.postimg.cc/Mprk72pR/IMG-0757.png',
            'https://i.postimg.cc/2yYgkC0D/IMG-0697.png',
            'https://i.postimg.cc/sXzvrhC2/IMG-0703.png',
            'https://i.postimg.cc/bJqNMf1N/IMG-0715.png',
            'https://i.postimg.cc/L8f988T5/IMG-0727.png',
            'https://i.postimg.cc/vZWydSYF/IMG-0754.png',
            'https://i.postimg.cc/63qFTHXT/IMG-0775.png',
            'https://i.postimg.cc/zB95Nmg5/IMG-0730.png',
            'https://i.postimg.cc/L8HS23nh/IMG-0736.png',
            'https://i.postimg.cc/gJ6FNMT0/IMG-0706.png',
            'https://i.postimg.cc/8zk2qk0M/IMG-0739.png',
            'https://i.postimg.cc/PxD9mCCh/IMG-0700.png',
            'https://i.postimg.cc/tgKmC9Bq/IMG-0712.png',
            'https://i.postimg.cc/ydCvCv8t/IMG-0721.png',
            'https://i.postimg.cc/NMx7qtV6/IMG-0685.png',
            'https://i.postimg.cc/pLnfVz4Y/IMG-0742.png',
            'https://i.postimg.cc/B6JHCy6g/IMG-0682.png',
            'https://i.postimg.cc/02zmZ78c/IMG-0718.png',
            'https://i.postimg.cc/R0LnqRRF/IMG-0772.png',
            'https://i.postimg.cc/vZW4SzCm/IMG-0763.png',
            'https://i.postimg.cc/0jTNVMfc/IMG-0691.png',
            'https://i.postimg.cc/YSrCDw6w/IMG-0769.png',
            'https://i.postimg.cc/ZnCcrg7g/IMG-0733.png',
            'https://i.postimg.cc/W346vCvj/IMG-0751.png',
            'https://i.postimg.cc/vHn7b5pf/IMG-0748.png',
            'https://i.postimg.cc/JhrjNvtt/IMG-0766.png',
            'https://i.postimg.cc/SRM9Qp1Z/IMG-0724.png',
            'https://i.postimg.cc/qMKX1Kr5/IMG-0694.png',
            'https://i.postimg.cc/MTX1VMtZ/IMG-0760.png'
        ];
        
        const obstacleImages = [
            'https://i.postimg.cc/X7TFhhzP/zagruzennoe-(4).png',
            'https://i.postimg.cc/mkkCfG4j/zagruzennoe-(3).png',
            'https://i.postimg.cc/Cx3NGd0d/zagruzennoe-(6).png',
            'https://i.postimg.cc/x1cxGWbG/zagruzennoe-(5).png'
        ];
        
        const images = {
            sky: new Image(),
            ground: new Image(),
            player: [],
            obstacles: []
        };
        
        images.sky.src = 'https://i.postimg.cc/FRtrm1z8/photo-4-2026-01-05-14-51-52.jpg';
        images.ground.src = 'https://i.postimg.cc/d35c70QV/photo-1-2026-01-06-20-37-31.jpg';
        
        skinImages.forEach(src => {
            const img = new Image();
            img.src = src;
            images.player.push(img);
        });
        
        obstacleImages.forEach(src => {
            const img = new Image();
            img.src = src;
            images.obstacles.push(img);
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        function initTelegramWebApp() {
            if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
                isTelegramWebApp = true;
                
                try {
                    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º WebApp
                    Telegram.WebApp.ready();
                    webAppInitialized = true;
                    
                    // –†–∞—Å—à–∏—Ä—è–µ–º WebApp –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
                    Telegram.WebApp.expand();
                    
                    // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    telegramUser = Telegram.WebApp.initDataUnsafe.user;
                    
                    if (telegramUser) {
                        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–º—è –∏–∑ Telegram
                        const telegramName = telegramUser.first_name + 
                                            (telegramUser.last_name ? ' ' + telegramUser.last_name : '');
                        document.getElementById('nicknameInput').value = telegramName;
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–µ–π–¥–∂ Telegram
                        document.getElementById('telegramBadge').style.display = 'block';
                        
                        // –ü—Ä—è—á–µ–º –∫–Ω–æ–ø–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram
                        document.getElementById('telegramAuthSection').style.display = 'none';
                        
                        showNotification(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${telegramName}!`, 'info');
                    }
                    
                    // –ú–µ–Ω—è–µ–º —Ç–µ–º—É –ø–æ–¥ Telegram
                    if (Telegram.WebApp.colorScheme === 'dark') {
                        document.body.style.backgroundColor = '#1a1a1a';
                    }
                    
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram WebApp:', error);
                    isTelegramWebApp = false;
                }
            } else {
                console.log('Telegram WebApp –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏');
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram
                document.getElementById('telegramAuthSection').style.display = 'block';
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
                document.getElementById('telegramAuthBtn').addEventListener('click', function() {
                    showNotification('–î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞', 'info');
                });
            }
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Telegram WebApp
            initTelegramWebApp();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä—ã –∏–∑ LocalStorage
            loadGameData();
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –Ω–∏–∫–∞
            document.getElementById('nicknameSubmit').addEventListener('click', function() {
                const nicknameInput = document.getElementById('nicknameInput').value.trim();
                
                if (nicknameInput === '') {
                    showNotification('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º!', 'error');
                    return;
                }
                
                playerName = nicknameInput;
                document.getElementById('currentPlayerName').textContent = playerName;
                
                document.getElementById('nicknameModal').style.display = 'none';
                document.getElementById('gameContainer').style.display = 'block';
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ LocalStorage
                loadPlayerDataFromLocalStorage();
                saveGameData();
                generateRanking();
                generateSkins();
                
                showNotification(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${playerName}!`, 'info');
            });
            
            document.getElementById('nicknameInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('nicknameSubmit').click();
                }
            });
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä—ã –≤ LocalStorage
        function loadGameData() {
            const savedName = localStorage.getItem('ispCatsPlayerName');
            const savedStats = localStorage.getItem('ispCatsPlayerStats');
            
            if (savedName) {
                playerName = savedName;
                document.getElementById('nicknameInput').value = playerName;
            }
            
            if (savedStats) {
                try {
                    const parsedStats = JSON.parse(savedStats);
                    playerStats = parsedStats;
                    
                    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Å–≤–æ–π—Å—Ç–≤, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
                    if (!playerStats.unlockedSkins) {
                        playerStats.unlockedSkins = [0];
                    }
                    
                    if (playerStats.selectedSkin === undefined) {
                        playerStats.selectedSkin = 0;
                    }
                    
                    if (playerStats.coins === undefined) {
                        playerStats.coins = 0;
                    }
                    
                    if (playerStats.coinsEarned === undefined) {
                        playerStats.coinsEarned = 0;
                    }
                    
                    if (playerStats.lastCoinScore === undefined) {
                        playerStats.lastCoinScore = 0;
                    }
                    
                    updateStatsDisplay();
                    showNotification('–ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∂–µ–Ω –∏–∑ –ø–∞–º—è—Ç–∏!', 'info');
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ LocalStorage:', e);
                }
            }
        }
        
        function saveGameData() {
            try {
                localStorage.setItem('ispCatsPlayerName', playerName);
                localStorage.setItem('ispCatsPlayerStats', JSON.stringify(playerStats));
                showNotification('–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω!', 'info');
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ LocalStorage:', e);
                showNotification('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞', 'error');
            }
        }
        
        function loadPlayerDataFromLocalStorage() {
            try {
                const savedData = localStorage.getItem('ispCatsPlayerStats');
                if (savedData) {
                    const parsedData = JSON.parse(savedData);
                    if (parsedData) {
                        // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å
                        playerStats = parsedData;
                        updateStatsDisplay();
                    }
                }
            } catch (e) {
                console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ LocalStorage:', e);
            }
        }
        
        function updateStatsDisplay() {
            document.getElementById('totalGames').textContent = playerStats.totalGames;
            document.getElementById('bestScore').textContent = playerStats.bestScore.toLocaleString();
            document.getElementById('totalPoints').textContent = playerStats.totalPoints.toLocaleString();
            document.getElementById('totalJumps').textContent = playerStats.totalJumps.toLocaleString();
            document.getElementById('averageScore').textContent = playerStats.totalGames > 0 ? 
                Math.floor(playerStats.totalPoints / playerStats.totalGames).toLocaleString() : "0";
            document.getElementById('openedSkins').textContent = playerStats.unlockedSkins.length + "/32";
            document.getElementById('totalCoins').textContent = playerStats.coins;
            document.getElementById('coinsAmount').textContent = playerStats.coins;
            document.getElementById('coinsForSkins').textContent = playerStats.coins;
            playerStats.openedSkins = playerStats.unlockedSkins.length;
        }
        
        function generateRanking() {
            const rankingList = document.getElementById('rankingList');
            rankingList.innerHTML = '';
            
            // –í–°–ï–ì–î–ê –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ —Å –¥–µ–º–æ-–∏–≥—Ä–æ–∫–∞–º–∏
            let allPlayers = [
                { name: "–ö–æ—Ç-—á–µ–º–ø–∏–æ–Ω", score: 15420, coins: 154, isCurrentPlayer: false },
                { name: "–£—Å–∞—Ç—ã–π –ø—Ä—ã–≥—É–Ω", score: 13250, coins: 132, isCurrentPlayer: false },
                { name: "–ú—É—Ä–∑–∏–∫", score: 12480, coins: 124, isCurrentPlayer: false },
                { name: "–†—ã–∂–∏–∫", score: 11890, coins: 118, isCurrentPlayer: false },
                { name: "–ë–∞—Ä—Å–∏–∫", score: 11230, coins: 112, isCurrentPlayer: false },
                { name: "–°–Ω–µ–∂–æ–∫", score: 10560, coins: 105, isCurrentPlayer: false }
            ];
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞ –≤ —Ä–µ–π—Ç–∏–Ω–≥
            const playerIndex = allPlayers.findIndex(p => p.name === playerName);
            if (playerIndex !== -1) {
                // –ï—Å–ª–∏ –∏–º—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –æ–¥–Ω–∏–º –∏–∑ –¥–µ–º–æ-–∏–≥—Ä–æ–∫–æ–≤, –æ–±–Ω–æ–≤–ª—è–µ–º –µ–≥–æ –¥–∞–Ω–Ω—ã–µ
                allPlayers[playerIndex].score = playerStats.bestScore;
                allPlayers[playerIndex].coins = playerStats.coins;
                allPlayers[playerIndex].isCurrentPlayer = true;
            } else {
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞ –∫–∞–∫ –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞
                allPlayers.push({ 
                    name: playerName, 
                    score: playerStats.bestScore, 
                    coins: playerStats.coins, 
                    isCurrentPlayer: true 
                });
            }
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –æ—á–∫–∞–º
            allPlayers.sort((a, b) => b.score - a.score);
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
            allPlayers.forEach((player, index) => {
                const rankingItem = document.createElement('div');
                rankingItem.className = `ranking-item ${player.isCurrentPlayer ? 'current-player' : ''}`;
                
                let placeText = "";
                if (index === 0) placeText = "ü•á 1 –º–µ—Å—Ç–æ";
                else if (index === 1) placeText = "ü•à 2 –º–µ—Å—Ç–æ";
                else if (index === 2) placeText = "ü•â 3 –º–µ—Å—Ç–æ";
                else placeText = `${index + 1} –º–µ—Å—Ç–æ`;
                
                rankingItem.innerHTML = `
                    <div class="rank">${index + 1}</div>
                    <div class="player-name">${player.name}</div>
                    <div class="player-position">${placeText} | ${player.score.toLocaleString()} –æ—á–∫–æ–≤ | ${player.coins} –º–æ–Ω–µ—Ç–æ–∫</div>
                `;
                
                rankingList.appendChild(rankingItem);
            });
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–π—Ç–∏–Ω–≥ –≤ LocalStorage
            saveRankingToLocalStorage(allPlayers);
        }
        
        function saveRankingToLocalStorage(rankingData) {
            try {
                localStorage.setItem('ispCatsRanking', JSON.stringify(rankingData));
            } catch (e) {
                console.log('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞:', e);
            }
        }
        
        function checkForCoinReward() {
            const coinsFromScore = Math.floor(game.score / 100);
            
            if (coinsFromScore > playerStats.coinsEarned) {
                const newCoins = coinsFromScore - playerStats.coinsEarned;
                playerStats.coinsEarned = coinsFromScore;
                
                showCoinEarnedAnimation();
                
                return newCoins;
            }
            
            return 0;
        }
        
        function showCoinEarnedAnimation() {
            const coinsEarned = document.getElementById('coinsEarned');
            coinsEarned.style.display = 'flex';
            
            setTimeout(() => {
                coinsEarned.style.display = 'none';
            }, 1000);
        }
        
        function unlockSkinWithCoins(skinIndex, price) {
            if (playerStats.coins >= price) {
                playerStats.coins -= price;
                
                if (!playerStats.unlockedSkins.includes(skinIndex)) {
                    playerStats.unlockedSkins.push(skinIndex);
                    playerStats.unlockedSkins.sort((a, b) => a - b);
                }
                
                playerStats.selectedSkin = skinIndex;
                
                saveGameData();
                updateStatsDisplay();
                generateSkins();
                
                if (game.running) {
                    updateCurrentSkinDisplay();
                }
                
                return true;
            }
            return false;
        }
        
        function selectSkin(skinIndex) {
            if (playerStats.unlockedSkins.includes(skinIndex)) {
                playerStats.selectedSkin = skinIndex;
                saveGameData();
                generateSkins();
                
                if (game.running) {
                    updateCurrentSkinDisplay();
                }
                
                return true;
            }
            return false;
        }
        
        function generateSkins() {
            const skinsContainer = document.getElementById('skinsContainer');
            skinsContainer.innerHTML = '';
            
            const skinPrices = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 750];
            
            skinNames.forEach((name, index) => {
                const skinCard = document.createElement('div');
                const price = skinPrices[index];
                const isOwned = playerStats.unlockedSkins.includes(index);
                const isLocked = !isOwned;
                const isSelected = playerStats.selectedSkin === index;
                
                skinCard.className = `skin-card ${isOwned ? 'owned' : ''} ${isLocked ? 'locked' : ''} ${isSelected ? 'selected' : ''}`;
                
                let displayName = name;
                let displayImage = skinImages[index];
                let displayStyle = '';
                
                if (index === 31 && !isOwned) {
                    displayName = "???";
                    displayStyle = 'filter: brightness(0.1) blur(2px);';
                }
                
                skinCard.innerHTML = `
                    <div class="skin-image">
                        <img src="${displayImage}" alt="${displayName}" title="${displayName}" 
                             style="${displayStyle}" 
                             onerror="this.src='https://placekitten.com/120/120?image=${index+1}'">
                    </div>
                    <div class="skin-name">${displayName}</div>
                    <div class="skin-price ${price === 0 ? 'free' : ''}">
                        ${price === 0 ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : `<i class="fas fa-coins coin-icon"></i>${price} –º–æ–Ω–µ—Ç–æ–∫`}
                    </div>
                    <div class="skin-status ${isOwned ? 'owned' : 'locked'}">
                        ${isOwned ? (isSelected ? '‚úì –í—ã–±—Ä–∞–Ω' : '‚úì –û—Ç–∫—Ä—ã—Ç') : '–ù–µ –æ—Ç–∫—Ä—ã—Ç'}
                    </div>
                `;
                
                skinCard.addEventListener('click', function() {
                    if (isOwned) {
                        if (selectSkin(index)) {
                            showNotification(`–°–∫–∏–Ω "${name}" –≤—ã–±—Ä–∞–Ω!`, 'info');
                        }
                    } else {
                        if (price === 0) {
                            if (!playerStats.unlockedSkins.includes(index)) {
                                playerStats.unlockedSkins.push(index);
                                playerStats.unlockedSkins.sort((a, b) => a - b);
                            }
                            selectSkin(index);
                            saveGameData();
                            updateStatsDisplay();
                            generateSkins();
                            showNotification(`–°–∫–∏–Ω "${name}" —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫—Ä—ã—Ç –∏ –≤—ã–±—Ä–∞–Ω!`, 'info');
                        } else {
                            if (unlockSkinWithCoins(index, price)) {
                                showNotification(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –∫—É–ø–∏–ª–∏ —Å–∫–∏–Ω "${name}" –∑–∞ ${price} –º–æ–Ω–µ—Ç–æ–∫!`, 'info');
                            } else {
                                showNotification(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç–æ–∫! –ù—É–∂–Ω–æ: ${price}, —É –≤–∞—Å: ${playerStats.coins}`, 'error');
                            }
                        }
                    }
                });
                
                skinsContainer.appendChild(skinCard);
            });
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
        document.querySelectorAll('.menu-button').forEach(button => {
            button.addEventListener('click', function() {
                document.querySelectorAll('.menu-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                this.classList.add('active');
                
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                const tabId = this.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
                
                if (tabId === 'rating') {
                    generateRanking();
                }
                
                if (tabId === 'skins') {
                    generateSkins();
                }
            });
        });
        
        // –ò–ì–†–û–í–ê–Ø –õ–û–ì–ò–ö–ê
        
        function initGame() {
            game.canvas = document.getElementById('gameCanvas');
            game.ctx = game.canvas.getContext('2d');
            
            game.width = window.innerWidth;
            game.height = window.innerHeight;
            game.canvas.width = game.width;
            game.canvas.height = game.height;
            
            game.player.skinIndex = playerStats.selectedSkin;
            game.player.y = game.height - game.player.height - 100;
            game.player.velocityY = 0;
            game.player.isJumping = false;
            
            game.ground.y = game.height - 100;
            game.ground.width = game.width;
            game.ground.height = 100;
            
            game.score = 0;
            game.distanceTraveled = 0;
            playerStats.coinsEarned = 0;
            playerStats.lastCoinScore = 0;
            game.gameSpeed = 5;
            game.baseSpeed = 5;
            game.obstacles = [];
            game.clouds = [];
            game.lastObstacleTime = Date.now();
            game.lastCloudTime = Date.now();
            game.lastScoreUpdate = Date.now();
            game.jumpCount = 0;
            game.running = true;
            game.isPaused = false;
            
            document.getElementById('currentScore').textContent = game.score;
            document.getElementById('currentCoins').textContent = playerStats.coins;
            document.getElementById('currentSpeed').textContent = game.gameSpeed.toFixed(1);
            
            updateCurrentSkinDisplay();
            
            gameLoop();
        }
        
        function updateCurrentSkinDisplay() {
            const skinIndex = playerStats.selectedSkin;
            let skinName = skinNames[skinIndex];
            let skinImage = skinImages[skinIndex];
            
            if (skinIndex === 31 && !playerStats.unlockedSkins.includes(31)) {
                skinName = "???";
            }
            
            document.getElementById('currentSkinName').textContent = skinName;
            document.getElementById('currentSkinImage').src = skinImage;
        }
        
        function createObstacle() {
            const obstacleTypes = [
                { width: 60, height: 80, type: 0 },
                { width: 70, height: 70, type: 1 },
                { width: 80, height: 60, type: 2 },
                { width: 90, height: 70, type: 3 }
            ];
            
            const type = Math.floor(Math.random() * obstacleTypes.length);
            const obstacle = {
                x: game.width,
                y: game.ground.y - obstacleTypes[type].height,
                width: obstacleTypes[type].width,
                height: obstacleTypes[type].height,
                type: obstacleTypes[type].type
            };
            
            game.obstacles.push(obstacle);
        }
        
        function createCloud() {
            const cloud = {
                x: game.width,
                y: Math.random() * (game.height / 3) + 50,
                width: 100 + Math.random() * 100,
                height: 60 + Math.random() * 40,
                speed: 1 + Math.random() * 2
            };
            
            game.clouds.push(cloud);
        }
        
        function updateGame() {
            if (game.isPaused || !game.running) return;
            
            const currentTime = Date.now();
            
            game.player.velocityY += game.gravity;
            game.player.y += game.player.velocityY;
            
            if (game.player.y > game.ground.y - game.player.height) {
                game.player.y = game.ground.y - game.player.height;
                game.player.velocityY = 0;
                game.player.isJumping = false;
            }
            
            if (currentTime - game.lastObstacleTime > game.obstacleInterval) {
                createObstacle();
                game.lastObstacleTime = currentTime;
                
                game.obstacleInterval = Math.max(800, 2000 - game.score * 0.01);
            }
            
            if (currentTime - game.lastCloudTime > game.cloudInterval) {
                createCloud();
                game.lastCloudTime = currentTime;
            }
            
            for (let i = game.obstacles.length - 1; i >= 0; i--) {
                game.obstacles[i].x -= game.gameSpeed;
                
                if (
                    game.player.x < game.obstacles[i].x + game.obstacles[i].width &&
                    game.player.x + game.player.width > game.obstacles[i].x &&
                    game.player.y < game.obstacles[i].y + game.obstacles[i].height &&
                    game.player.y + game.player.height > game.obstacles[i].y
                ) {
                    gameOver();
                    return;
                }
                
                if (game.obstacles[i].x + game.obstacles[i].width < 0) {
                    game.obstacles.splice(i, 1);
                }
            }
            
            for (let i = game.clouds.length - 1; i >= 0; i--) {
                game.clouds[i].x -= game.clouds[i].speed;
                
                if (game.clouds[i].x + game.clouds[i].width < 0) {
                    game.clouds.splice(i, 1);
                }
            }
            
            game.gameSpeed = game.baseSpeed + Math.floor(game.score / 100) * 0.1;
            
            document.getElementById('currentSpeed').textContent = game.gameSpeed.toFixed(1);
            
            if (currentTime - game.lastScoreUpdate > game.scoreUpdateInterval) {
                const distancePerUpdate = game.gameSpeed * (game.scoreUpdateInterval / 1000) * 10;
                game.distanceTraveled += distancePerUpdate;
                
                const scoreToAdd = Math.floor(game.distanceTraveled) - game.score;
                if (scoreToAdd > 0) {
                    game.score += scoreToAdd;
                    document.getElementById('currentScore').textContent = game.score;
                    
                    const newCoins = checkForCoinReward();
                    if (newCoins > 0) {
                        playerStats.coins += newCoins;
                        document.getElementById('currentCoins').textContent = playerStats.coins;
                    }
                }
                
                game.lastScoreUpdate = currentTime;
            }
        }
        
        function drawGame() {
            game.ctx.clearRect(0, 0, game.width, game.height);
            
            if (images.sky.complete) {
                game.ctx.drawImage(images.sky, 0, 0, game.width, game.height);
            } else {
                game.ctx.fillStyle = '#87CEEB';
                game.ctx.fillRect(0, 0, game.width, game.height);
            }
            
            game.ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            game.clouds.forEach(cloud => {
                game.ctx.beginPath();
                game.ctx.ellipse(cloud.x + cloud.width/4, cloud.y + cloud.height/3, cloud.width/4, cloud.height/3, 0, 0, Math.PI * 2);
                game.ctx.ellipse(cloud.x + cloud.width/2, cloud.y + cloud.height/4, cloud.width/4, cloud.height/3, 0, 0, Math.PI * 2);
                game.ctx.ellipse(cloud.x + cloud.width*3/4, cloud.y + cloud.height/3, cloud.width/4, cloud.height/3, 0, 0, Math.PI * 2);
                game.ctx.fill();
            });
            
            if (images.ground.complete) {
                game.ctx.drawImage(images.ground, 0, game.ground.y, game.width, game.ground.height);
            } else {
                game.ctx.fillStyle = '#8B4513';
                game.ctx.fillRect(0, game.ground.y, game.width, game.ground.height);
            }
            
            game.obstacles.forEach(obstacle => {
                if (images.obstacles[obstacle.type] && images.obstacles[obstacle.type].complete) {
                    game.ctx.drawImage(
                        images.obstacles[obstacle.type], 
                        obstacle.x, 
                        obstacle.y, 
                        obstacle.width, 
                        obstacle.height
                    );
                } else {
                    game.ctx.fillStyle = '#8B0000';
                    game.ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
                    
                    game.ctx.fillStyle = '#FF0000';
                    game.ctx.fillRect(obstacle.x + 5, obstacle.y + 5, obstacle.width - 10, obstacle.height - 10);
                }
            });
            
            const skinIndex = game.player.skinIndex;
            if (images.player[skinIndex] && images.player[skinIndex].complete) {
                game.ctx.drawImage(
                    images.player[skinIndex],
                    game.player.x,
                    game.player.y,
                    game.player.width,
                    game.player.height
                );
            } else {
                game.ctx.fillStyle = '#FFA500';
                game.ctx.fillRect(game.player.x, game.player.y, game.player.width, game.player.height);
                
                game.ctx.fillStyle = 'white';
                game.ctx.fillRect(game.player.x + 15, game.player.y + 15, 15, 15);
                game.ctx.fillRect(game.player.x + 50, game.player.y + 15, 15, 15);
                
                game.ctx.fillStyle = 'black';
                game.ctx.fillRect(game.player.x + 20, game.player.y + 20, 8, 8);
                game.ctx.fillRect(game.player.x + 55, game.player.y + 20, 8, 8);
                
                game.ctx.fillStyle = '#FFA500';
                game.ctx.beginPath();
                game.ctx.moveTo(game.player.x + 20, game.player.y);
                game.ctx.lineTo(game.player.x + 10, game.player.y - 20);
                game.ctx.lineTo(game.player.x + 30, game.player.y - 10);
                game.ctx.fill();
                
                game.ctx.beginPath();
                game.ctx.moveTo(game.player.x + 60, game.player.y);
                game.ctx.lineTo(game.player.x + 70, game.player.y - 20);
                game.ctx.lineTo(game.player.x + 50, game.player.y - 10);
                game.ctx.fill();
            }
            
            if (game.isPaused) {
                game.ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                game.ctx.fillRect(0, 0, game.width, game.height);
                game.ctx.font = 'bold 48px Arial';
                game.ctx.fillStyle = 'white';
                game.ctx.textAlign = 'center';
                game.ctx.fillText('–ü–ê–£–ó–ê', game.width / 2, game.height / 2);
                game.ctx.font = '24px Arial';
                game.ctx.fillText('–ù–∞–∂–º–∏—Ç–µ –ü–†–û–ë–ï–õ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è', game.width / 2, game.height / 2 + 50);
            }
        }
        
        function gameLoop() {
            if (!game.running) return;
            
            updateGame();
            drawGame();
            
            requestAnimationFrame(gameLoop);
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à
        document.addEventListener('keydown', function(e) {
            if (!game.running) return;
            
            if ((e.code === 'Space' || e.code === 'ArrowUp') && !game.player.isJumping) {
                game.player.velocityY = game.jumpForce;
                game.player.isJumping = true;
                game.jumpCount++;
                
                playerStats.totalJumps++;
                saveGameData();
            }
            
            if (e.code === 'KeyP') {
                togglePause();
            }
        });
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ —ç–∫—Ä–∞–Ω—É (–¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
        gameCanvas.addEventListener('click', function() {
            if (!game.running) return;
            
            if (!game.player.isJumping) {
                game.player.velocityY = game.jumpForce;
                game.player.isJumping = true;
                game.jumpCount++;
                
                playerStats.totalJumps++;
                saveGameData();
            }
        });
        
        function togglePause() {
            if (!game.running) return;
            
            game.isPaused = !game.isPaused;
            const pauseBtn = document.getElementById('pauseBtn');
            if (game.isPaused) {
                pauseBtn.innerHTML = '<i class="fas fa-play"></i>';
            } else {
                pauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
            }
        }
        
        function gameOver() {
            game.running = false;
            
            playerStats.totalGames += 1;
            playerStats.totalPoints += game.score;
            
            if (game.score > playerStats.bestScore) {
                playerStats.bestScore = game.score;
            }
            
            const coinsEarned = Math.floor(game.score / 100);
            playerStats.coins += coinsEarned;
            
            saveGameData();
            updateStatsDisplay();
            
            document.getElementById('finalScore').textContent = `–û—á–∫–∏: ${game.score}`;
            document.getElementById('finalCoins').textContent = `–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –º–æ–Ω–µ—Ç–æ–∫: ${coinsEarned}`;
            document.getElementById('gameOverScreen').style.display = 'flex';
        }
        
        // –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò –ò–ì–†–´
        
        function startGame() {
            document.getElementById('gameContainer').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            
            initGame();
            
            game.canvas.focus();
        }
        
        function returnToMenu() {
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('gameOverScreen').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'block';
            
            generateRanking();
            generateSkins();
        }
        
        function restartGame() {
            document.getElementById('gameOverScreen').style.display = 'none';
            initGame();
        }
        
        // –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô
        
        document.getElementById('startGameBtn').addEventListener('click', function() {
            startGame();
        });
        
        document.getElementById('pauseBtn').addEventListener('click', function() {
            togglePause();
        });
        
        document.getElementById('exitGameBtn').addEventListener('click', function() {
            returnToMenu();
        });
        
        document.getElementById('restartBtn').addEventListener('click', function() {
            restartGame();
        });
        
        document.getElementById('menuBtn').addEventListener('click', function() {
            returnToMenu();
        });
    </script>
</body>
</html>